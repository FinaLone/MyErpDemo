{% extends "base.html" %}

{% block title %}客户关系管理{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Hello, {% if current_user.is_authenticated() %}{{ current_user.user_name }}{% else %}Stranger{% endif %}!</h1>
        <h2>客户关系查询页面，主要用于二次开发。</h2>
</div>
<p>
1234567
    <canvas id="myChart" width="400" height="400">123</canvas>
</p>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='Chart.js/Chart.js') }}"></script>
    <!--
<script type="text/javascript">

var data = {
	labels : ["January","February","March","April","May","June","July"],
	datasets : [
		{
			fillColor : "rgba(220,220,220,0.5)",
			strokeColor : "rgba(220,220,220,1)",
			pointColor : "rgba(220,220,220,1)",
			pointStrokeColor : "#fff",
			data : [65,59,90,81,56,55,40]
		},
		{
			fillColor : "rgba(151,187,205,0.5)",
			strokeColor : "rgba(151,187,205,1)",
			pointColor : "rgba(151,187,205,1)",
			pointStrokeColor : "#fff",
			data : [28,48,40,19,96,27,100]
		}
	]
}
var ctx = $("#myChart").get(0).getContext("2d");
var myNewChart = new Chart(ctx);
new Chart(ctx).Line(data,options);
</script>-->

	<script>
	$(document).ready(function(){
		var $nav = $("nav dl");
		$("article").each(function(){
			var $el = $(this);
			var $h1 = $el.find("h1");
			var sectionTitle = $h1.html();
			var articleId = $el.attr("id");
			var $dt = $("<dt><a href=\"#"+articleId +"\">"+sectionTitle+"</a></dt>");
			$dt.find("a").on("click",function(e){
				e.preventDefault();
				$('html,body').animate({scrollTop: $h1.offset().top},400);
			});
			$nav.append($dt);
			var $subtitles = $el.find("h2");
			$subtitles.each(function(){
				var $h2 = $(this);
				var title = $h2.text();
				var newID = articleId + "-" +camelCase(title);
				$h2.attr("id",newID);
				var $dd = $("<dd><a href=\"#" +newID + "\">" + title + "</a></dd>");
				$dd.find("a").on("click",function(e){
					e.preventDefault();
					$('html,body').animate({scrollTop: $h2.offset().top},400);
				})
				$nav.append($dd);
			});
			var $articles = $el.find("article");
		});
		$("canvas").each(function(){
			var $canvas = $(this);
			var ctx = this.getContext("2d");
			eval($("code[data-for='" + $canvas.attr("id") + "']").text());
			var evalString = "new Chart(ctx)." + $canvas.data("type") + "(data);";
			eval(evalString);
		});
		prettyPrint();
		function camelCase(str){
			var splitString = str.split(" ");
			var returnedCamel = splitString[0].toLowerCase();
			for (var i=1; i<splitString.length; i++){
				returnedCamel += splitString[i].charAt(0).toUpperCase() + splitString[i].substring(1).toLowerCase();
			}
			return returnedCamel;
		}
	});
	</script>
{% endblock %}
